#coding:utf-8
import os
import json

def read_file(file):
    datas = []
    with open(file,'r',encoding='utf-8') as f:
        for line in f:
            datas.append(json.loads(line))
    return datas

def list_json_files(folder_path):
    file_list = []
    for root, dirs, files in os.walk(folder_path):
        for filename in files:
            full_path = os.path.join(root, filename)
            if filename.endswith(".jsonl"):
                file_list.append(full_path)
    return file_list

def read_prompt():
    template_fillblank = '你是一名化学领域的专家，任务是根据特定标准对填空题的**<题干>、<回答>和<正确答案集合>**进行评估。\n\n评估流程：\n先从**<题干>**中理解填空的顺序是否可以替换,再逐项比较：对于**<回答>**中的文本，你需要从中抽出核心内容（可能是多个）来作为填空题目的答案集合，然后对于抽出来的每一个答案，按顺序与**<正确答案集合>**中的对应答案进行比较，若该答案可以与**<正确答案集合>**中其他位置的答案顺序替换，则比较所有可以替换位置的答案，选择最好的作为结果。注意你需要逐一评估每一对匹配的答案，确保它们在核心内容上是否一致。\n判定标准：如果某一答案的核心内容与对应的正确答案一致，即可判定为正确。忽略文体、语法或标点的差异，专注于核心内容的匹配度。\nACC计算：在完成所有答案的评估后，计算准确率（ACC）。ACC 的计算方式为正确答案数/总答案数。\n\n输出要求：\n在**<抽取>**部分，列出从当前文本中抽出来的答案集合。\n在**<分析>**部分，详细列出每一对答案的比较结果，明确指出是否判定为正确，并简要说明原因。\n在**<最终得分>**部分，直接给出0到1之间的ACC得分。\n\n示例：\n\n<样例1>\n<题干>\n请回答以下问题。过滤的推动力以过滤介质两侧的压强差表示。根据推动力的不同，过滤可分为_____、_____和_____三类。\n<回答>\n加压过滤和真空过滤;重力过滤;离心过滤\n<正确答案集合>重力过滤;离心过滤;加压过滤和真空过滤\n<抽取>\n加压过滤和真空过滤; 重力过滤; 离心过滤\n<分析>\n第一个答案：<回答>中的\\"加压过滤和真空过滤\\"与<正确答案集合>中的\\"加压过滤和真空过滤\\"完全一致，因此该答案是正确的。\n第二个答案：<回答>中的\\"重力过滤\\"与<正确答案集合>中的\\"重力过滤\\"完全一致，因此该答案是正确的。\n第三个答案：<回答>中的\\"离心过滤\\"与<正确答案集合>中的\\"离心过滤\\"完全一致，因此该答案是正确的。\n<最终得分>\n1\n\n<样例2>\n<题干>请回答以下问题。\n实验室中常用的铬酸洗液是由_____和_____配制的暗红色溶液，若已失效，则显_____色。\n<回答>\n<begin>K₂Cr₂O₇,H2SO4;绿<end>\n<正确答案集合> 浓硫酸;重铬酸钾;绿\n<抽取>\nK₂Cr₂O₇;H2SO4;绿\n<分析>\n在<回答集合>和<正确答案集合>中各有3个答案。在第一个问题的答案中，\'K₂Cr₂O₇\'和\'重铬酸钾\'表示的含义相同，该答案是正确的；在第二个问题的答案中，\'H2SO4\'和\'浓硫酸\'的含义不完全相同，\'H2SO4\'表示硫酸并没有明确表示浓硫酸，因此，第二个答案是错误的。第三个问题中\\\'绿\\\'与\\\'绿\\\'含义相同，正确。\n<最终得分>\n0.67\n\n接下来是需要你评估的内容：\n<题干>{}\n<回答>{}\n<正确答案集合>{}'
    template_jianda = "你是一名化学领域的专家，任务是根据特定标准对简答题给定回答进行评估。\n接下来会给出一个问题的<回答>和<正确答案>。\n评分标准为1到5分，请依据以下具体标准进行评分。并用中文输出。\n评分标准：\n1分：回答完全错误或不相关\n提供的回答与正确答案完全无关或错误。\n2分：回答部分正确，但有重大遗漏\n回答部分正确，但缺失关键信息，不能完全满足正确答案的需求。\n3分：回答基本正确，但有小的错误或遗漏\n回答基本正确，但有轻微的错误或遗漏，与正确答案的主要含义没有冲突。\n4分：回答正确，但表述不够完美\n回答正确，但可能表述上不够精确或略微冗长。\n5 分：回答完全正确，表述精准\n回答完全正确，准确无误，表述清晰简洁，完美符合正确答案的含义。\n请根据上述评分标准和下面给出的<样例>，对回答进行分析和评分。\n请输出具体的分析过程和最终得分，分别以'<分析>'、'<最终得分>'开头。\n在'<分析>'中给出每个步骤的计算验证。\n在'<最终得分>'中直接输出数字得分1-5。\n\n<样例1>\n<回答>\n(1)理想气体的卡诺循环过程满足$\\\\rm{{\\\\triangle U=0}}$，$\\\\rm{{\\\\triangle H=0}}$，$\\\\rm{{\\\\triangle S=0}}$，$\\\\rm{{\\\\triangle G=\\\\triangle H-\\\\triangle U=0}}$；由于非理想气体有热力学能、熵和焓的变化，则$\\\\rm{{\\\\triangle U  >  0}}$，$\\\\rm{{\\\\triangle H  >  0}}$，$\\\\rm{{\\\\triangle S  >  0}}$，$\\\\rm{{\\\\triangle G  <  0}}$。\n【答案】\n（1）U＞0，H＞0，S＞0，G＜0\n<正确答案> \n(1)循环过程所有状态函数均不变,其增量都为零。\n(2)$\\\\triangle\\\\mathrm{{U}}=0$。\n(3)可逆相变$\\\\triangle\\\\mathrm{{G}}=0$。\n(4)$\\\\triangle\\\\mathrm{{S}}=0$\n<分析>\n答案错误,过程缺乏-步骤或内容缺乏,因此,这个回答是错误的。\n<最终得分>\n1\n\n<样例2>\n<回答>\n由波函数的绝对值平方可确定电子在核外单位体积内出现的概率；由薛定谔方程可求解原子的能级，进而求得原子的能量。\n【答案】\n（1）根据波函数的绝对值平方可确定电子在核外单位体积内出现的概率。\n（2）利用薛定谔方程可求解原子的能级，进而求得原子的能量。\n<正确答案>\n(1)定态波函数$\\\\psi$是空间坐标$\\\\mathrm{{x}}$,$\\\\mathrm{{y}}$和$\\\\mathrm{{z}}$的函数,所以,可粗略的把$\\\\psi$看成是在$\\\\mathrm{{x}}$,$\\\\mathrm{{y}}$,$\\\\mathrm{{z}}$三维空间里能找到电子的一个区域,这个区域叫做“原子轨道”。为此,波函数$\\\\psi$和原子轨道是同义语.“原子轨道”只不过是代表原子中电子运动状态的一个波函数,\n(2)原子的波动方程可以出一系列波函数。在一定状态下(如基态)每个电子都有自己的波函数。例如$\\\\psi$、$\\\\mathrm{{ya}}$、$\\\\psi \\\\mathrm{{i}}$等,每一个波函数$\\\\psi$都代表核外电子的某种运动状态,这些运动状态对应有确定的能量$\\\\mathrm{{E}}$(即该电子处在一定的能级中)。对于氢原子及类氢离子来说,其能量公式为$\\\\mathrm{{E}}=-\\\\mathrm{{R}}\\\\frac{{z^{{2}}}}{{n^{{2}}}}$\n(3)虽然波函数$\\\\psi$与原子轨道是同义语,但这里所指的原子轨道与玻尔理论所指的行星式原子轨道,以及经典物理学中宏观物体的位置和动量完全确定的轨道(或轨迹)概念在本质上是不同的。鉴于此,我国有学者建议,为区分这两个有本质区别的概念,把$\\\\psi$叫做“原子轨道函数”简称“原子轨函”。为此,“原子轨道”与“原子轨函”实际上是同义词。\n(4)波函数$\\\\psi$反映了波的性质,但微观粒子的波,本身就不是声波及电磁波。声波或电磁波可以具体理为介质质点的振动或电磁场的振动在空间的传播。而波函数则无具体物理意义。\n(5)波函数$\\\\psi$在空间具有起伏性。它可以为正,也可以为负,亦可以为零。它表明在该区域的波函数在数学上的正和负,并非指电荷的正负。波函数可以叠加。\n(6)波函数$\\\\psi$由一套量子数所规定。当值确定时,波函数亦确定。每一个波函数$\\\\psi$…都是由两个部分组成R(r)和$Y(\\\\theta, \\\\phi)$,即$\\\\psi_{{n, l, m}}(r, \\\\theta, \\\\varphi)=R(r) \\\\cdot \\\\mathrm{{Y}}(\\\\theta, \\\\varphi)$\n<分析>\n意图清晰。\n<最终得分>\n3\n\n<样例3>\n<回答>\n布朗运动是悬浮在液体中固体小颗粒的运动，布朗运动说明了液体分子不停的做无规则运动。\n本题考查了布朗运动产生的原因，注意布朗运动的实质是液体分子不停地做无规则撞击悬浮微粒，并不是液体分子瞬时运动的结果。\n【答案】\n布朗运动是胶粒受到液体分子的撞击而引起的运动，胶粒的运动是液体分子运动的反映，但并不是液体分子真实的运动情况。\n<正确答案>\n布朗运动是由于分散介质的分子热运动不断地由各个方向同时冲击胶粒,其合力未被抵消,短时间向某一方向有一显著作用,而导致胶粒运动,因此布朗运动不是胶粒的真实运动。又因胶粒受不平衡的冲击引起振动,周期约为10－8秒,而人们的肉眼能分辨的周期最低为0.1秒,因此我们所观察到的胶粒平均位移是胶粒在每秒钟内受各个方向冲击百万次运动变化的宏观结果。\n<分析>\n意图清晰,答案正确\n<最终得分>\n5\n\n接下来是需要你评估的内容：\n<回答>\n{}\n<正确答案>\n{}"
    template_calculate = "你是一名化学领域的专家，任务是根据特定标准对计算题给定回答进行评估。\n接下来会给出一个问题的<回答>和<正确答案>。\n评分标准为1到5分，请依据以下具体标准进行评分。并用中文输出。\n评分标准：\n1分：回答完全错误或不相关\n提供的回答与正确答案完全无关或错误。\n2分：回答部分正确，但有重大遗漏\n回答部分正确，但缺失关键信息，不能完全满足正确答案的需求。\n3分：回答基本正确，但有小的错误或遗漏\n回答基本正确，但有轻微的错误或遗漏，与正确答案的主要含义没有冲突。\n4分：回答正确，但表述不够完美\n回答正确，但可能表述上不够精确或略微冗长。\n5 分：回答完全正确，表述精准\n回答完全正确，准确无误，表述清晰简洁，完美符合正确答案的含义。\n注意：若输出内容中Latex格式错误按错误的程度酌情扣分。\n注意：若输出内容中最终答案错误，最多评3分\n\n请根据上述评分标准和下面给出的<样例>，对回答进行分析和评分。\n请输出具体的分析过程和最终得分，分别以'<分析>'、'<最终得分>'开头。\n在'<分析>'中给出每个步骤的计算验证。\n在'<最终得分>'中直接输出数字得分1-5。\n\n<样例1>\n<回答>\n(1)理想气体的卡诺循环过程满足$\\\\rm{{\\\\triangle U=0}}$，$\\\\rm{{\\\\triangle H=0}}$，$\\\\rm{{\\\\triangle S=0}}$，$\\\\rm{{\\\\triangle G=\\\\triangle H-\\\\triangle U=0}}$；由于非理想气体有热力学能、熵和焓的变化，则$\\\\rm{{\\\\triangle U  >  0}}$，$\\\\rm{{\\\\triangle H  >  0}}$，$\\\\rm{{\\\\triangle S  >  0}}$，$\\\\rm{{\\\\triangle G  <  0}}$。\n【答案】\n（1）U＞0，H＞0，S＞0，G＜0\n<正确答案> \n(1)循环过程所有状态函数均不变,其增量都为零。\n(2)$\\\\triangle\\\\mathrm{{U}}=0$。\n(3)可逆相变$\\\\triangle\\\\mathrm{{G}}=0$。\n(4)$\\\\triangle\\\\mathrm{{S}}=0$\n<分析>\n答案错误,过程缺乏-步骤或内容缺乏,因此,这个回答是错误的。\n<最终得分>\n1\n\n<样例2>\n<回答>\n由波函数的绝对值平方可确定电子在核外单位体积内出现的概率；由薛定谔方程可求解原子的能级，进而求得原子的能量。\n【答案】\n（1）根据波函数的绝对值平方可确定电子在核外单位体积内出现的概率。\n（2）利用薛定谔方程可求解原子的能级，进而求得原子的能量。\n<正确答案>\n(1)定态波函数$\\\\psi$是空间坐标$\\\\mathrm{{x}}$,$\\\\mathrm{{y}}$和$\\\\mathrm{{z}}$的函数,所以,可粗略的把$\\\\psi$看成是在$\\\\mathrm{{x}}$,$\\\\mathrm{{y}}$,$\\\\mathrm{{z}}$三维空间里能找到电子的一个区域,这个区域叫做“原子轨道”。为此, 波函数$\\\\psi$和原子轨道是同义语.“原子轨道”只不过是代表原子中电子运动状态的一个波函数,\n(2)原子的波动方程可以出一系列波函数。在一定状态下(如基态)每个电子都有自己的波函数。例如$\\\\psi$、$\\\\mathrm{{ya}}$、$\\\\psi \\\\mathrm{{i}}$等,每一个波函数$\\\\psi$都代表核外电子的某种运动状态,这些运动状态对应有确定的能量$\\\\mathrm{{E}}$(即该电子处在一定的能级中)。对于氢原子及类氢离子来说,其能量公式为$\\\\mathrm{{E}}=-\\\\mathrm{{R}}\\\\frac{{z^{{2}}}}{{n^{{2}}}}$\n(3)虽然波函数$\\\\psi$与原子轨道是同义语,但这里所指的原子轨道与玻尔理论所指的行星式原子轨道,以及经典物理学中宏观物体的位置和动量完全确定的轨道(或轨迹)概念在本质上是不同的。鉴于此,我国有学者建议,为区分这两个有本质区别的概念,把$\\\\psi$叫做“原子轨道函数”简称“原子轨函”。为此,“原子轨道”与“原子轨函”实际上是同义词。\n(4)波函数$\\\\psi$反映了波的性质,但微观粒子的波,本身就不是声波及电磁波。声波或电磁波可以具体理为介质质点的振动或电磁场的振动在空间的传播。而波函数则无具体物理意义。\n(5)波函数$\\\\psi$在空间具有起伏性。它可以为正,也可以为负,亦可以为零。它表明在该区域的波函数在数学上的正和负,并非指电荷的正负。波函数可以叠加。\n(6)波函数$\\\\psi$由一套量子数所规定。当值确定时,波函数亦确定。每一个波函数$\\\\psi$…都是由两个部分组成R(r)和$Y(\\\\theta, \\\\phi)$,即$\\\\psi_{{n, l, m}}(r, \\\\theta, \\\\varphi)=R(r) \\\\cdot \\\\mathrm{{Y}}(\\\\theta, \\\\varphi)$\n<分析>\n意图清晰。\n<最终得分>\n3\n\n<样例3>\n<回答>\n布朗运动是悬浮在液体中固体小颗粒的运动，布朗运动说明了液体分子不停的做无规则运动。\n本题考查了布朗运动产生的原因，注意布朗运动的实质是液体分子不停地做无规则撞击悬浮微粒，并不是液体分子瞬时运动的结果。\n【答案】\n 布朗运动是胶粒受到液体分子的撞击而引起的运动，胶粒的运动是液体分子运动的反映，但并不是液体分子真实的运动情况。\n<正确答案>\n布朗运动是由于分散介质的分子热运动不断地由各个方向同时冲击胶粒,其合力未被抵消,短时间向某一方向有一显著作用,而导致胶粒运动,因此布朗运动不是胶粒的真实运动。又因胶粒受不平衡的冲击引起振动,周期约为10－8秒,而人们的肉眼能分辨的周期最低为0.1秒,因此我们所观察到的胶粒平均位移是胶粒在每秒钟内受各个方向冲击百万次运动变化的宏观结果。\n<分析>\n意图清晰,答案正确\n<最终得分>\n5\n\n接下来是需要你评估的内容：\n<回答>\n{}\n<正确答案>\n{}"
    template_zhaiyao = "您是一位**化学领域的资深期刊评审专家**，具备丰富的学术评审经验。我将输入给你<待评估摘要>和<标准摘要>。\n1. **待评估摘要**：一位化学领域的专家对一篇化学文献的总结。\n2. **标准摘要**：该论文的正式摘要。\n你的任务是严格参考**标准摘要**的内容与结构，以及以下**摘要总结要求**，根据**评分标准**评估**待评估摘要**的质量，最后给出一个1-5分的总评分，并用中文输出。\n- **摘要总结要求**：\n  - 简短的一段话总结文章。\n  - 包含**方法**、**结论**和**意义**。\n  - 总结格式为：某人做了什么，使用了哪些方法，得出了什么结论，具有哪些意义。\n\n- **评分标准：**\n  - **5分**：与标准摘要的结构、内容高度一致，且完全符合摘要总结要求，准确涵盖了方法、结论和意义，无知识错误，逻辑清晰。\n  - **4分**：内容大体准确，但在某些方面与标准摘要的内容或结构略有偏差，虽基本符合摘要总结要求，但是有部分内容不够清晰或者少量要素缺失。\n  - **3分**：与标准摘要的内容和结构相比，缺乏关键要素或语言不够精炼，或表达不够清晰，信息不全，部分符合摘要总结要求。\n  - **2分**：与标准摘要的对应部分不一致，未能充分覆盖所需的内容，逻辑不清晰或者结构不完整。\n  - **1分**：缺乏大量关键信息或与标准摘要的内容和结构严重不符，且与摘要总结要求差距较大。\n---\n请输出具体的分析过程和最终得分，分别以'<分析>'、'<最终得分>'开头。\n在'<分析>'部分，依据评分标准，阐明对'<待评估摘要>'评分的依据和理由。\n在'<最终得分>'中直接输出数字得分1-5。\n使用中文输出。\n\n下面给出几个<样例>供你参考。\n### 样例\n<样例1>\n<待评估摘要>\nThis study explores the application of polymer materials in environmental pollution control and analyzes the impact of their degradation products on ecosystems.\n<标准摘要>\nThis study designed a novel metal-organic framework (MOF) material for efficient carbon dioxide capture. By modulating the length and pore size of the ligands, the CO₂ adsorption capacity was enhanced, and the adsorption mechanism was revealed through theoretical calculations. This material demonstrates broad application potential in environmental engineering.\n<分析>  \n待评估摘要的内容与标准摘要相比有几个显著差异。首先，待评估摘要仅简单提到了研究对象和部分研究内容，即“聚合物材料在环境污染控制中的应用”及“降解产物对生态系统的影响”，但缺乏具体的研究方法、结论以及研究的意义。在标准摘要中，不仅明确指出了研究对象（金属有机框架材料）、研究方法（调控配体长度和孔径、结合理论计算），而且给出了明确的研究结论和意义（提高了CO₂的吸附容量，揭示了吸附机理，具有广泛应用潜力）。  \n待评估摘要缺乏方法的具体描述，且未涉及任何研究的结论或其应用意义。根据摘要总结要求，待评估摘要的表达过于简略，且未包含完整的研究要素，因此无法完全满足摘要总结要求。\n总体来看，待评估摘要的结构和内容与标准摘要存在明显偏差，虽然简要提到了研究的主题，但在方法、结论和意义上的信息严重缺失。\n<最终得分>  \n1\n\n<样例2>\n<待评估摘要>\nThis study developed a novel catalyst for nitrogen reduction reaction (NRR) through electrochemical processes. The study optimized the surface structure of the catalyst to improve reaction selectivity and revealed its electron transfer mechanism.\n<标准摘要>\nThis study developed a novel system based on single-atom catalysts for nitrogen electrochemical reduction reactions (NRR). By modulating the electronic structure of the metal active center, the catalyst achieved high ammonia yield and Faradaic efficiency. Additionally, in situ spectroscopic techniques were employed to elucidate the nitrogen activation process and the formation of reaction intermediates, providing theoretical guidance for designing efficient NRR catalysts.\n<分析>\n待评估摘要虽然涵盖了开发新型催化剂用于氮气电化学还原反应（NRR）的主要内容，并提到了通过优化催化剂表面结构提高反应选择性以及揭示电子转移过程，这些部分与标准摘要中的方法和结论部分有一定的对应。然而，待评估摘要缺乏对催化剂具体类型（如单原子催化剂）的说明，未提及具体的实验技术（如原位光谱技术），以及未阐明研究的意义（ 如为高效NRR催化剂设计提供理论依据）。因此，虽然基本符合摘要总结要求，但在内容的完整性和细节上存在不足，未能全面反映标准摘要的结构和内容。\n<最终得分>\n3\n\n<样例3>\n<待评估摘要>\nThis study developed a novel reaction system for efficient C-C bond coupling reactions using visible light catalysis. Porphyrin derivatives were employed as photocatalysts, achieving high conversion rates and excellent selectivity. Moreover, kinetic studies and DFT calculations were conducted to uncover the electron transfer mechanism in the photocatalytic reaction, offering new insights into green chemistry for organic synthesis.\n<标准摘要>\nThis study developed a novel visible-light-catalyzed reaction system for efficient C-C bond coupling reactions. Porphyrin derivatives were designed as photocatalysts, achieving high conversion rates and excellent selectivity under mild conditions. Additionally, kinetic studies and DFT calculations revealed the electron transfer mechanism in the photocatalytic reaction, providing new perspectives for green chemistry in organic synthesis.\n<分析>\n待评估摘要与标准摘要在内容和结构上高度一致。摘要准确涵盖了研究目的（开发高效的C-C键偶联反应体系）、所用方法（可见光催化、卟啉衍生物作为光催化剂、动力学和DFT计算研究）、主要结论（实现高转化率和优异选择性，揭示电子转移机制）以及研究意义（为有机合成中的绿色化学提供新思路）。语言表达清晰，无知识错误，完全符合摘要总结的要求。\n<最终得分>\n5\n\n接下来是需要你评估的内容：\n<待评估摘要>\n{}\n<标准摘要>\n{}"
    template_tigang = "你是化学文献评审专家，负责评估`待评估提纲`与`标准提纲`的差异。我将输入给你<待评估提纲>和<标准提纲>。\n你的任务是根据多个维度对`待评估提纲`进行综合分析，最后给出一个1-5分的总评分，并用中文输出。\n请依据以下具体评分维度和评分标准进行评分。\n评分标准：\n\n### **提纲评分维度：**\n- **结构性**\n  - 检查待评估提纲是否具有清晰的章节划分，各部分的顺序是否合理，并与标准提纲的框架是否一致。\n\n- **内容完整性**\n  - 比较待评估提纲与标准提纲，检查是否有关键部分遗漏。\n\n- **逻辑性**\n  - 检查待评估提纲内容是否有清晰的逻辑关系，部分内容是否连贯。\n\n- **清晰度**\n  - 检查待评估提纲的表述是否简洁、清晰，是否存在冗余或模糊的部分。\n\n- **正确性**\n  - 检查待评估提纲是否有知识错误。\n\n### **提纲评分标准：**\n- **1分：极差**\n  - 提纲结构混乱，内容缺失，逻辑不清，表达不清或者有严重知识错误。\n\n- **2分：较差**\n  - 提纲有部分明显错误或缺失，结构不完整，逻辑不清或表达不清。\n\n- **3分：一般**\n  - 提纲基本符合标准提纲的框架，但存在某些遗漏或冗余，内容不够精炼。\n\n- **4分：良好**\n  - 提纲结构清晰，内容完整，逻辑性强，基本覆盖了标准提纲中的所有关键部分，但表述略显冗长。\n\n- **5分：优秀**\n  - 提纲结构完善，内容全面，逻辑严谨，与标准提纲几乎一致。\n---\n请根据上述的评分标准和下面给出的<样例>，对`待评估提纲`进行分析和评分。\n请输出具体的分析过程和最终得分，分别以'<分析>'、'<最终得分>'开头。\n在'<分析>'部分，依据评分标准，阐明对'<待评估提纲>'评分的依据和理由。\n在'<最终得分>'中直接输出数字得分1-5。\n使用中文输出\n\n### 样例\n<样例1>\n<待评估提纲>\nFocus on double Bingel reactions and functionalization;\nPerform DFT calculations to analyze electronic structure and non-covalent interactions.\n<标准提纲>\nOptimization of synthetic reactions;\nControl experiments;\nFurther exploration of reaction conditions and yields.\n<分析>\n1. **结构性**：待评估提纲仅包含两部分内容，而标准提纲有三部分（合成反应优化、对照实验、进一步探索反应条件和产率）。提纲的章节划分不够完整，结构上与标准提纲存在明显差异。\n2. **内容完整性**：待评估提纲主要聚焦于双Bingel反应及其功能化以及采用DFT计算分析电子结构与非共价作用，缺乏对照实验和反应条件及产率的进一步探索，关键部分有所遗漏。\n3. **逻辑性**：提纲中的两部分内容之间缺乏明确的逻辑关联，整体逻辑性不强，与标准提纲的逻辑框架不一致。\n4. **清晰度**：提纲的表述较为简洁明确，但由于内容不够全面，部分关键内容未涉及，导致整体表达略显不足。\n5. **正确性**：在所涉及的内容方面，提纲表述准确，无明显知识错误。\n综合以上各方面，待评估提纲在结构性和内容完整性上存在明显不足，逻辑性较弱，尽管表述清晰且无知识错误，但整体符合程度较低。\n<最终得分>\n1\n\n<样例2>\n<待评估提纲>\nDeveloped a direct deoxygenation Suzuki-Miyaura arylation reaction for tertiary alcohols;\nConducted high-throughput screening to determine optimal catalytic conditions;\nExplored the substrate scope, including various alcohols, heterocycles, and functionalized substrates;\nInvestigated the mechanism using Hammett studies and kinetic analysis.\n<标准提纲>\nOptimization of reaction conditions;\nSubstrate scope;\nSpectroscopic characterization and analysis;\nMechanistic studies.\n<分析>\n1. **结构性**：待评估提纲包含四个部分，与标准提纲的四个部分基本对应，但缺少“光谱表征分析”这一章节。因此，结构上基本符合但不完全。\n2. **内容完整性**：与标准提纲相比，缺少“光谱表征分析”部分，导致内容不够完整。\n3. **逻辑性**：提纲的各部分顺序合理，逻辑清晰，从反应开发到条件优化，再到底物范围探索和机理研究，层次分明。\n4. **清晰度**：各部分表述简洁明确，但是稍显冗余。\n5. **正确性**：提纲内容没有明显的知识错误，所涉及的化学反应和研究方法准确。\n综合来看，待评估提纲基本符合标准提纲的框架，结构清晰，逻辑性强，但在内容完整性方面存在明显缺失，且内容不够精炼。\n<最终得分>\n3\n\n<样例3>\n<待评估提纲>\nOptimization of reaction conditions;\nRegioselective benzoylation of different types of substrates;\nInvestigation of reaction mechanisms using machine learning techniques;\nDFT theoretical calculations and analysis.\n<标准提纲>\nOptimization of reaction conditions;\nSubstrate scope for synthesis;\nMechanistic studies;\nDFT calculations.\n<分析>\n1. **结构性**：待评估提纲与标准提纲均包含四个主要部分，章节划分清晰且顺序合理，符合标准框架。\n2. **内容完整性**：待评估提纲涵盖了标准提纲中的所有关键部分，且在第二点和第三点上提供了更具体的细节，如“不同类型底物的区域选择性苯甲酰化”以及“使用机器学习技术研究反应机理”，这显示出对内容的深入理解。\n3. **逻辑性**：各部分内容之间衔接紧密，逻辑关系明确，整体连贯。\n4. **清晰度**：提纲表述简洁明了，无冗余或模糊之处。\n5. **正确性**：提纲内容无明显知识错误。\n因此，待评估提纲在各评分维度上均表现优秀，与标准提纲几乎一致，且在某些方面有所提升。\n<最终得分>\n5\n\n接下来是需要你评估的内容：\n<回答提纲>\n{}\n<正确提纲>\n{}"
    template_xingzhi = "你是一名化学领域的专家，现在有一个Molecular_Name_Generation_from_Text_Description评估的任务，我将输入给你<回答描述>和<正确描述>。\n请你依照<正确描述>的内容以及评分标准对<回答描述>内容的质量进行评分，并用中文输出。\n评分范围为1到5分，请依据以下具体标准进行评分。\n评分标准：\n1分：回答完全错误或不相关\n回答完全偏离问题主题，与分子的物理化学性质描述无关，或科学性明显错误。\n2分：回答部分正确，但有重大遗漏或错误\n部分信息正确，但缺乏关键内容或包含严重科学错误，导致描述不完整。\n3分：回答基本正确，但存在细节错误或不够全面\n回答主要内容正确， 但有轻微的错误或遗漏，未能完全覆盖分子性质的所有核心要点。\n4分：回答正确但不够精炼或略有瑕疵\n回答清晰、内容全面，但语言表述可能存在冗长或不够精确的地方。\n5分：回答完全正确且表述精准\n回答科学性强、内容完整，语言简洁精炼，逻辑清晰，完全符合分子物理化学性质描述的要求。\n\n请根据上述评分标准和下面给出的<样例>，对回答进行分析和评分。\n请输出具体的分析过程和最终得分，分别以'<分析>'、'<最终得分>'开头。\n在'<分析>'部分，依据评分标准，阐明对'<回答描述>'评分的依据和理由。\n在'<最终得分>'中直接输出数字得分1-5。\n使用中文输出\n\n<样例1>\n<回答描述>\nThe polarity of the water molecule (H₂O) originates from its molecular structure. Due to the high electronegativity of the oxygen atom, the electron cloud of the O-H bond shifts toward the oxygen atom, forming a permanent dipole moment. Therefore, water is a polar molecule. The strong hydrogen bonding between water molecules is the primary reason for its high specific heat capacity and boiling point.\n<正确描述>\nWater is a polar molecule, and its polarity arises from the high electronegativity of the oxygen atom, which induces a dipole moment in the molecule. Additionally, hydrogen bonds between water molecules contribute to its high specific heat capacity, high boiling point, and excellent solubility.\n<分析>\n回答准确描述了水分子的极性来源及其与物理性质的关系，内容完整且科学性强，语言表述清晰且精炼，与正确答案完全一致。\n<最终得分>\n5\n\n<样例2>\n<回答描述>\nThe carbon dioxide (CO₂) molecule is polar because it contains two polar bonds, and the electronegativity of carbon and oxygen atoms differs.\n<正确描述>\nThe carbon dioxide (CO₂) molecule is nonpolar. Although it contains two polar bonds (C=O), the linear and symmetric structure of CO₂ causes the dipole moments of the two polar bonds to cancel each other out, resulting in a molecule with no net dipole moment and therefore no polarity.\n<分析>\n回答错误地将 CO₂ 描述为极性分子，忽略了其线性对称结构的作用。尽管 CO₂ 分子确实包含极性键（C=O），但线性分子结构使两个极性键的偶极矩完全抵消，从而使分子整体无极性。这一错误是科学性的基础性错误，与正确答案存在显著冲突。\n<最终得分>\n1\n\n<样例3>\n<回答描述>\nThe ethanol (C₂H₅OH) molecule consists of a hydroxyl group (-OH) and an ethyl group (-C₂H₅). Hydrogen bonding exists within the molecule, which gives it a high boiling point. Due to the polarity of the hydroxyl group, ethanol can mix with water and dissolve nonpolar molecules, making it an excellent solvent.\n<正确描述>\nEthanol (C₂H₅OH) is a polar molecule composed of a hydroxyl group (-OH) and an ethyl group (-C₂H₅). The hydrogen bonding from the hydroxyl group gives it a high boiling point and good miscibility with water. At the same time, the nonpolar ethyl group allows it to dissolve some nonpolar molecules, making ethanol an amphiphilic solvent.\n<分析>\n该回答在基本结构和氢键作用的描述上是准确的，但在解释乙醇的两性溶解能力时未能全面涵盖乙基的非极性作用，导致解释不够完整。同时回答称乙醇是“极好的溶剂”，这一表述较为绝对，而正确描述更为谨慎地称其为“两性溶剂”， 强调其在不同类型溶剂中的应用。\n<最终得分>\n2\n\n接下来是需要你评估的内容：\n<回答描述>\n{}\n<正确描述>\n{}"
    template_danbulujing = "你是一名**资深有机化学评审专家**，您将收到一个单步合成路径推荐任务中的两个合成路径：一个是`标准合成路径`，另一个是化学家预测的合成路径。请依据`标准合成路径`，并结合以下评分标准（1-5分），对`预测路径`进行评分，并简要说明评分理由，请用中文输出。\n\n**评分标准：**\n\n- **5分：优秀**\n  - 预测路径与标准合成路径完全一致或非常接近，步骤科学、可行且可行，所有反应条件适当。或者与标准合成路径存在差异，但验证后具有实际化学可行性。\n- **4分：良好**\n  - 预测路径与标准合成路径非常接近，科学合理，但在表述或反应条件上稍显不足，少数细节上存在小的差异。\n- **3分：一般**\n  - 预测路径与标准合成路径有一定差异，缺少关键条件，或者可行性一般，可能存在某些反应条件不完全适当。\n- **2分：较差**\n  - 预测路径与标准合成路径差异较大，反应条件不理想或不可行。\n- **1分：极差**\n  - 预测路径存在步骤科学性明显错误，与标准合成路径完全不符，步骤不合理且不可行。\n\n**评分示例：**\n\n<样例1>\n<预测路径>\nHydrolyze in water\n<标准合成路径> \nNaOH and alcohol solution\n<分析>\n预测路径“Hydrolyze in water”与标准合成路径“NaOH and alcohol solution”差异较大。标准合成路径使用了氢氧化钠和醇溶液，这通常表示在醇溶液中进行反应，这为某些水解反应提供了更合适的溶剂环境及条件，可能有利于提高反应的选择性和反应速率。而预测路径中的“在水中水解”没有提到使用氢氧化钠作为催化剂或反应条件，水作为溶剂的选择可能会导致反应速率较慢或选择性较差，尤其是如果反应物对水溶液的亲和力较弱。因此，预测路径存在明显的反应条件不足，且可能不可行。\n<最终得分>\n1\n\n<样例2>\n<预测路径>\nToluene is catalytically oxidized to benzoic acid\n<标准合成路径> \nOxidation reaction (KMnO4)\n<分析>\n预测路径中的反应是“甲苯催化氧化为苯甲酸”，从总体思路上来看，这是一个常见的甲苯氧化反应，符合标准合成路径中使用的氧化反应（KMnO4）。  \n然而，标准合成路径明确提到使用的是高锰酸钾（KMnO4）作为氧化剂，而预测路径只简单提到“催化氧化”，并没有具体提及氧化剂或详细的反应条件。虽然催化氧化可以理解为一种广义的氧化方式，但具体催化剂和反应条件未明确指出，可能导致反应条件的不完全确定。因此，预测路径与标准合成路径是非常接近的，但仍缺少一些关键细节，可能会影响实际操作的可行性。\n\n<最终得分>  \n3\n\n<样例3>\n<预测路径>\nNitrile is hydrogenated to amine using Raney Ni as the catalyst\n<标准合成路径> \nReduction reaction (Hydrogen)\n\n<分析>\n预测路径提出了使用Raney Ni作为催化剂将腈（nitrile）还原为胺（amine）的合成方案，与标准合成路径的“氢还原反应”在化学反应类型上非常接近。氢还原反应通常涉及氢气与合适催化剂（如Raney Ni）作用，因此该路径在反应类型上是合理的。\n\n总结来说，预测路径与标准路径非常接近，科学性是合理的，因此给出5分。\n<最终得分>\n5\n---\n你需要基于上述评分标准和给出的<样例>，对`预测路径`进行分析和评分。\n请输出具体的分析过程和最终得分，分别以'<分析>'、'<最终得分>'开头。\n在'<分析>'中给出每个步骤的计算验证。\n在'<最终得分>'中直接输出数字得分1-5。\n请用中文输出。\n\n接下来是需要你评估的内容：\n<预测路径>\n{}\n<标准合成路径>\n{}"
    template_duobulujing = "你是一名**资深有机化学评审专家**，您将收到一个多步合成路径推荐任务中的两个合成路径：一个是`标准合成路径`，另一个是化学家预测的合成路径。请依据`标准合成路径`中的底物、目标产物和反应步骤等内容，并结合以下评分标准（1-5分），对`预测路径`进行评分，并简要说明评分理由，请用中文输出。\n\n**评分标准：**\n\n- **5分：优秀**\n  - 预测路径与标准合成路径完全一致或非常接近，步骤科学、可行且可行。所有反应条件适当，反应结果明确，底物到产物的转化完全相同。或者与标准合成路径存在差异，但验证后具有实际化学可行性。\n- **4分：良好**\n  - 预测路径科学合理，但在路径的表述或反应条件上稍显不足。或者步骤大多数科学合理且可行，存在少数小的差异或可改进之处。反应条件适当，反应机理清晰。\n- **3分：一般**\n  - 预测路径与标准合成路径有一定差异，部分步骤合理且可行，但存在一些不合理或不可行的反应步骤。整体合成路径可行性一般，可能存在某些反应条件不完全适当。\n- **2分：较差**\n  - 预测路径与标准合成路径差异较大，包含与目标化合物相关的部分步骤，但遗漏了多个关键步骤或含有重大科学错误，或者有多个不合理、不可行的步骤，难以实现目标化合物的高效合成。\n- **1分：极差**\n  - 预测路径存在步骤科学性明显错误，无法实现目标化合物的合成，与标准合成路径完全不符，步骤不合理且不可行。\n\n**评分示例：**\n\n<样例1>\n<预测路径>\n1. Ethylene reacts with bromine in an addition reaction to form 1,2-dibromoethane. \n2. The 1,2-dibromoethane undergoes hydrolysis to yield the target product.\n<标准合成路径> \n1. Ethylene reacts with water under acidic catalysis to form ethanol.\n2. The ethanol is then oxidized to acetic acid using strong oxidizers like acidic potassium permanganate or acidic potassium dichromate.\n3. Ethanol and acetic acid react under heated conditions with concentrated sulfuric acid to form ethyl acetate.\n<分析>\n1. **反应步骤不合理：** 预测路径的第一步是乙烯与溴反应生成1,2-二溴乙烷，这是一个加成反应，但与目标产物（乙酸乙酯）的合成路径完全无关。目标化合物的合成需要通过乙烯与水的反应生成乙醇，而非乙烯与溴的反应。因此，这一反应方向和目标产物的合成无直接关联。\n2. **遗漏关键步骤：** 预测路径中没有涉及乙醇的氧化步骤，也没有涉及乙醇与乙酸反应生成乙酸乙酯的过程，这与标准合成路径的关键步骤有重大差异。乙醇到乙酸的氧化反应是合成乙酸乙酯的核心步骤之一。\n3. **反应条件与机理不合适：** 预测路径中的第二步涉及1,2-二溴乙烷的水解，虽然水解可能是一个合理的反应，但此反应并不与乙酸乙酯的合成相关，也与标准路径中的步骤完全不符。\n\n总的来说，预测路径与标准合成路径完全不符，且存在科学性错误，无法实现目标产物的有效合成，因此给出1分（极差）。\n\n<最终得分>\n1\n\n<样例2>\n<预测路径>\n1. Benzene reacts with bromine in the presence of the catalyst FeBr₃ to produce bromobenzene. \n2. Bromobenzene reacts with carbon dioxide, and after acidification, benzoic acid is produced.\n<标准合成路径> \n1. Using benzene as the starting material, it reacts with chloromethane in a Friedel–Crafts alkylation reaction to produce toluene.  \n2. Toluene is oxidized under potassium permanganate conditions to yield benzoic acid.\n<分析>\n1. **步骤1**：预测路径通过FeBr₃催化苯的溴化生成溴苯，科学合理。但与标准合成路径中的甲苯生成路径不同。  \n2. **步骤2**：溴苯与CO₂反应生成苯甲酸，虽可行，但路径较复杂，且未详细说明关键步骤。标准合成路径通过氧化甲苯生成苯甲酸更简洁有效。  \n\n**综合分析**：预测路径生成苯甲酸可行，但步骤冗长且效率低，缺乏对部分关键步骤的清晰描述。  \n\n<最终得分>  \n3\n\n<样例3>\n<预测路径>\n1. side-chain bromination of methyl 2-methyl-3-nitrobenzoate with N-bromosuccinimide (NBS) in the presence of chlorobenzene to prepare methyl 2-(bromomethyl)-3-nitrobenzoate；\n2. cyclo condensation of the prepared methyl 2-(bromomethyl)-3-nitrobenzoate with racemic 3-aminopiperidine-2,6-dione in N, N-dimethylformamide (DMF) to prepare 3-(4-nitro-1-oxo-1,3-dihydro-2H-isoindol-2-yl)piperidine-2,6-dione compound (I)；\n3. reduction of compound (I) using palladium on carbon catalyst in DMF, applying hydrogen gas into the reaction mixture to afford lenalidomide.\n<标准合成路径> \n1. Methyl 2-methyl-3-nitrobenzoate undergoes bromination in methyl acetate to yield the aromatic brominated compound methyl 2-(bromomethyl)-3-nitrobenzoate.  \n2. Methyl 2-(bromomethyl)-3-nitrobenzoate reacts with succinimide under alkaline conditions to form an amide bond, resulting in a five-membered ring, which is the nitro precursor of lenalidomide.  \n3. The nitro precursor of lenalidomide is reduced using iron (Fe) and ammonium chloride (NH₄Cl) to obtain lenalidomide.\n\n<分析>\n1. **步骤1**：预测路径使用N-溴代琥珀酰亚胺（NBS）在氯苯存在下对甲基2-甲基-3-硝基苯甲酸甲酯进行侧链溴化，生成甲基2-(溴甲基)-3-硝基苯甲酸甲酯。标准合成路径使用甲酸甲酯作为溶剂进行溴化。NBS是一种常用的选择性溴化试剂，氯苯作为溶剂也具有良好的稳定性和溶解性。因此，步骤1在化学上是合理且可行的，与标准合成路径一致。\n\n2. **步骤2**：预测路径中，甲基2-(溴甲基)-3-硝基苯甲酸甲酯与消旋的3-氨基哌啶-2,6-二酮在N,N-二甲基甲酰胺（DMF）中进行环缩反应，生成3-(4-硝基-1-氧代-1,3-二氢-2H-异苯并二氮唑-2-基)哌啶-2,6-二酮化合物（I）。标准合成路径则是在碱性条件下使用琥珀酰亚胺进行反应，形成酰胺键并生成五元环。预测路径中的环缩步骤与标准合成路径存在一定差异，但在合理的反应条件下，环缩反应是可行的，且能够生成目标前体。\n\n3. **步骤3**：预测路径采用在DMF中使用钯炭催化剂并通入氢气还原化合物（I）以获得来那度胺。标准合成路径使用铁和氯化铵进行还原。钯炭在有机合成中是一种有效的催化剂，能够高效地还原硝基基团，且在DMF溶剂中反应条件适当。因此，步骤3也是合理且可行的，尽管还原剂有所不同，但同样能够实现目标产物的合成。\n\n总体来看，预测路径与标准合成路径在各步骤中存在一些差异，但所有步骤均具有实际化学可行性，且反应条件合理。因此，预测路径得分较高。\n\n<最终得分>\n5\n---\n`标准合成路径`明确给出了底物、目标产物以及每一步反应的描述，因此你需要基于这些信息以及上述评分标准和给出的<样例>，对`预测路径`进行分析和评分。\n请输出具体的分析过程和最终得分，分别以'<分析>'、'<最终得分>'开头。\n在'<分析>'中给出每个步骤的计算验证。\n在'<最终得分>'中直接输出数字得分1-5。\n请用中文输出。\n\n接下来是需要你评估的内容：\n<预测路径>\n{}\n<标准合成路径>\n{}\n"
    template_fanyingzhongjianti = "您是一位**化学领域的资深专家**，我将给你提供`正确中间体`，你的任务是严格参考**正确中间体**的特性等内容，根据**评分标准**、**反应中间体定义**评估**预测中间体**的质量，最后给出一个1-5分的总评分，并用中文输出。\n\n- **评分标准：**\n  - **5分**：预测中间体与已知正确中间体完全一致，包括稳定性、反应机理等特性，或者有略微差异但本质上属于同一种物质，不影响中间体的正确性。\n  - **4分**：预测中间体与已知正确中间体相似，稳定性和特性大致相符，但在某些细节上有所不同。\n  - **3分**：预测中间体与已知正确中间体有一定差异，缺少部分具体信息，或者部分符合定义。\n  - **2分**：预测中间体与已知正确中间体差异较大，特性略微相似，或者部分不符合定义。\n  - **1分**：预测中间体与已知正确中间体完全不一致，且特性也完全不符合，或者与定义严重不符。\n\n- **反应中间体定义**：反应中间体是化学反应过程中短暂存在的、稳定的分子或离子，处于反应物和最终产物之间，但不是最终产物。\n\n---\n下面给出几个<样例>供你参考。\n### 样例\n<样例1>\n<预测中间体>\nAllylic anion\n<正确中间体>\nCarbocation\n<分析>  \n预测中间体与已知正确中间体完全不一致，且特性也完全不符合。因此预测中间体完全错误。\n<最终得分>  \n1\n\n<样例2>\n<预测中间体>\nCarbene\n<正确中间体>\nChloromethyl carbene\n<分析>  \n根据您提供的**预测中间体**（Carbene）和**正确中间体**（氯甲基卡宾），我将按照评分标准进行评估。\n- **相似性**：Carbene作为一个概念，包含了氯甲基卡宾这一具体的种类。两者在某些基本特性上是相关的——都属于卡宾类中间体。\n- **差异性**：Carbene本身并没有完全表明稳定性和短暂存在的特性，它仅是一个更广泛的类别，因此不能直接等同于氯甲基卡宾。\n由于Carbene是卡宾类中间体的广义概念，而氯甲基卡宾是其特定的实例，二者存在一定的差异。虽然两者同属卡宾，但预测中间体并未明确展示与氯甲基卡宾相同的稳定性和反应特性。\n总结，预测中间体与正确中间体有一定的相似性，但在稳定性、具体性质和反应机理上有所差异，且Carbene作为一个更广泛的类别未能完全符合定义。\n<最终得分>\n3\n\n<样例3>\n<预测中间体>\nAlkyl radical\n<正确中间体>\nRadical intermediate\n<分析>  \n根据您提供的信息和评分标准，我将对“烷基自由基”作为预测中间体与“自由基中间体”作为正确中间体进行评估。\n- **相似度**：预测的烷基自由基与正确的自由基中间体在本质上非常相似，因为烷基自由基本身就是自由基中间体的一种，符合自由基中间体的定义。两者的主要特性相符，即它们都是具有一个不成对电子的分子，通常是反应中短暂存在的中间体。\n- **差异**：唯一的细微差异可能是在名称上，预测中间体具体指明了“烷基”这一基团，而自由基中间体更为泛化，包含了所有自由基中间体的种类（例如烷基自由基、苯基自由基等）。\n总结，从稳定性、特性和定义角度来看，预测中间体“烷基自由基”与正确中间体“自由基中间体”非常一致。唯一的差异是名称的细节，但这并不会影响中间体的本质。因此，这两个中间体在化学反应中应该是等效的。\n预测中间体与正确中间体完全一致，符合反应中间体的定义和特性。\n<最终得分>\n5\n\n---\n你需要基于上述评分标准和给出的<样例>，对`预测中间体`进行分析和评分。\n请输出具体的分析过程和最终得分，分别以'<分析>'、'<最终得分>'开头。\n在'<分析>'中给出每个步骤的计算验证。\n在'<最终得分>'中直接输出数字得分1-5。\n请用中文输出。\n\n接下来是需要你评估的内容：\n<预测中间体>\n{}\n<正确中间体>\n{}"
    return template_fillblank, template_jianda, template_calculate, template_zhaiyao, template_tigang, template_xingzhi, template_danbulujing, template_duobulujing, template_fanyingzhongjianti
    


if __name__ == "__main__":
    # 9类题型，填空50、简答50、计算50、化学论文摘要生成20、研究内容提纲生成20、Molecular_Name_Generation_from_Text_Description50、单步合成路径推荐20、多步20、反应中间体推导20

    template_fillblank, template_jianda, template_calculate, template_zhaiyao, template_tigang, template_xingzhi, template_danbulujing, template_duobulujing, template_fanyingzhongjianti = read_prompt()
    folder_path = "/Users/lixiang/Downloads/iflytek/化学测评_en/Llama3kale/Before_rating"
    file_list = []
    for root, _, files in os.walk(folder_path):
        for file in files:
            if file.endswith(".jsonl"):
                file_list.append(os.path.join(root, file)) 

    # file_list = [
    #     r"Before_rating\Fill-in-the-Blank_Task_test_new.jsonl",
    #     r"Before_rating\Fill-in-the-Blank_Task_test_3shot_new.jsonl", 
    #     r"Before_rating\Short_Answer_Task_test.jsonl", 
    #     r"Before_rating\Short_Answer_Task_test_3shot.jsonl",
    #     r"Before_rating\Calculation_Task_test.jsonl",
    #     r"Before_rating\Calculation_Task_test_3shot.jsonl",
    #     r"Before_rating\Chemical_Paper_Abstract_Generation_test.jsonl",
    #     r"Before_rating\Research_Outline_Generation_test.jsonl",
    #     r"Before_rating\Molecular_Name_Generation_from_Text_Description_test.jsonl",
    #     r"Before_rating\Molecular_Name_Generation_from_Text_Description_test_3shot.jsonl",
    #     r"Before_rating\Single_Step_Synthetic_Pathway_Recommendation_test.jsonl",
    #     r"Before_rating\Single_Step_Synthetic_Pathway_Recommendation_test_3shot.jsonl",
    #     r"Before_rating\Multistep_Synthetic_Pathway_Recommendation_test.jsonl",
    #     r"Before_rating\Multistep_Synthetic_Pathway_Recommendation_test_3shot.jsonl",
    #     r"Before_rating\Intermediate_Derivation_test.jsonl",
    #     r"Before_rating\Intermediate_Derivation_test_3shot.jsonl"
    # ]

    # print(file_list, len(file_list))
    output_file = "Model.jsonl"

    #确认输入的文件以及输出的文件路径
    # print(file_list, len(file_list), output_file)

    output = []
    res_list = []
    i = 0
    
    for fold in file_list:
        if "Fill-in-the-Blank" in fold:
            data_list = read_file(fold)
            for data in data_list:
                answer = data.get("answer")
                gold = data.get("gold")
                query_prefix = data.get("query_prefix","===题干===") # 
                res = {
                    "query": template_fillblank.format(query_prefix, answer,  gold),
                    "filename": fold.split("Before_rating")[-1]
                }
                with open(output_file, 'a', encoding='utf-8') as outfile:
                    outfile.write(json.dumps(res, ensure_ascii=False))
                    outfile.write("\n")
                    
                    
        else:
            data_list = read_file(fold)
            for data in data_list:
                answer = data.get("answer")
                gold = data.get("gold")
                query_prefix = data.get("query_prefix","===题干===") # 这里是填空题的题干，必须在此处提供填空题题干
                res = {
                    "query": template_fillblank.format(query_prefix, answer,  gold),
                    "filename": fold.split("Before_rating")[-1]
                }
                with open(output_file, 'a', encoding='utf-8') as outfile:
                    outfile.write(json.dumps(res, ensure_ascii=False))
                    outfile.write("\n")
            
            
    